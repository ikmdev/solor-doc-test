name: DocBook Build

run-name: DocBook Build -- ${{github.ref_name || github.head_ref}}

on:
 push:
 pull_request:
 workflow_dispatch:
  inputs:
    module:
      description: 'choose modules to build'
      required: true
      type: choice
      options:
        - book
        - volume1
        - volume2
        - volume3
        - volume4
        - volume5
        - volume6
        - volume7
        - volume8
        - volume9
        - volume10
        - volume11
        - volume12
        - volume13
        - volume14
        - volume15
        - volume16
       
env:
  title: volume1-Introduction

jobs:
  build-job:
    name: Build Job -- 
    runs-on: ubuntu-24.04
    steps:
      - name: checkout repo
        uses: actions/checkout@v4

      - name: install java
        uses: actions/setup-java@v4
        with:
         distribution: 'zulu' # See 'Supported distributions' for available options
         java-version: '23'

      - name: Build Project
        run: mvn clean install -U -D'maven.build.cache.enabled=false'

      - name: Determine Module Path --
        id: module
        run: |
             echo "module_path=${{ github.event.inputs.module }}" >>GITHUB_OUTPUT

      - name: Build Selected Module -- 
        run: |
          echo "Building module: ${{ steps.module.outputs.module_path }}"
          mvn - B ${{ github.event.inputs.mvn clean install -U -D'maven.build.cache.enabled=false' }} -p1  "${{ steps.module.outputs.module_path }}" -am

        # working-directory: ./volume1-Introduction
        # run: mvn clean install -U -D'maven.build.cache.enabled=false'
